Инструменты MCP сервера Anthropic: Стандарт и спецификация
Anthropic в ноябре 2024 года опубликовала Model Context Protocol (MCP) как открытый стандарт для подключения AI-ассистентов к внешним источникам данных и инструментам. Это протокол решает проблему комбинаторной сложности (MxN problem) — когда каждая новая система требует отдельного коннектора.
​

Архитектура Tools в MCP
Tools (инструменты) — это функции, которые может вызывать языковая модель для взаимодействия с внешними системами. Они могут выполнять действия вроде запросов к БД, вызовов API или выполнения вычислений.
​

Структура определения инструмента
Каждый инструмент определяется через JSON-схему с обязательными полями:
​

Поле	Тип	Описание
name	string	Уникальный идентификатор инструмента
description	string	Понятное описание функциональности
inputSchema	JSON Schema	Определение параметров инструмента
title (опционально)	string	Человекочитаемое имя для UI
outputSchema (опционально)	JSON Schema	Определение структуры результата
Важно: inputSchema должен быть валидным JSON Schema объектом (по умолчанию используется JSON Schema 2020-12). Для инструментов без параметров рекомендуется:

json
{ "type": "object", "additionalProperties": false }
Стандарт коммуникации
MCP использует JSON-RPC 2.0 для обмена сообщениями между клиентом и сервером. Три основные операции:
​

1. Обнаружение инструментов (tools/list)

text
Запрос: client → server
Ответ: Array of tool definitions with metadata
2. Вызов инструмента (tools/call)

text
Запрос: { name: "tool_name", arguments: {...} }
Ответ: { content: [...], isError: false }
3. Уведомление об изменении (notifications/tools/list_changed)

Если сервер объявил capability listChanged: true

Уведомляет клиента об добавлении/удалении инструментов
​

Результаты работы инструментов
Результаты могут быть неструктурированными (текст, изображения) или структурированными (JSON):
​

json
{
  "content": [
    {
      "type": "text",
      "text": "результат работы"
    }
  ],
  "structuredContent": { /* опциональный JSON объект */ },
  "isError": false
}
Механизмы транспорта
MCP поддерживает два способа подключения:
​

stdio: Стандартный ввод/вывод для локальных интеграций

SSE (Server-Sent Events): HTTP POST для удаленных подключений

Недавние улучшения (2025)
В ноябре 2025 Anthropic добавила три новые функции для масштабирования MCP:
​

Tool Search Tool — сокращает использование токенов на 85%

Решает проблему обнаружения при большом количестве инструментов

Предотвращает неправильный выбор инструмента

Programmatic Tool Calling — управление результатами без раздувания контекста

Разделяет оркестрацию от обработки результатов

Tool Use Examples — примеры вызовов в определениях

Помогает модели учиться правильной инвокации параметров

Безопасность и контроль
MCP включает встроенный механизм для запроса согласия пользователя перед выполнением инструментов. Серверы должны объявлять capabilities:
​

json
"capabilities": {
  "tools": {
    "listChanged": true
  }
}
Поддерживаемые системы
Anthropic предоставляет готовые MCP серверы для популярных сервисов:
​

Google Drive

Slack

GitHub/Git

PostgreSQL

Puppeteer

И растущий список коммьюнити-серверов

Стандартная спецификация
Версия спецификации: 2025-06-18 (актуальная)

Протокол сообщений: JSON-RPC 2.0

Схема данных: JSON Schema 2020-12

Открытый исходный код: github.com/anthropics/mcp

Инструменты MCP предоставляют модели-управляемый интерфейс, позволяя LLM автоматически обнаруживать и вызывать функции на основе контекста пользовательского запроса. Это унифицированный стандарт, который работает не только с Claude, но и потенциально с любыми другими LLM-приложениями.
​